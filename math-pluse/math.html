<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Ø±ÛŒØ§Ø¶ÛŒâ€Œ Ù¾Ù„Ø§Ø³ | Ù‡Ù…Ù‡ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ Ø¯Ø± ÛŒÚ© ÙØ§ÛŒÙ„</title>
  <link href="https://fonts.googleapis.com/css2?family=Vazir&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Vazir', sans-serif;
      background: linear-gradient(to right, #0f2027, #203a43, #2c5364);
      color: #f0f0f0;
      text-align: center;
      padding: 60px 20px;
      margin: 0;
    }
    h1 { font-size: 2.5em; margin-bottom: 20px; }
    .section {
      background: white;
      color: #333;
      padding: 20px;
      margin: 20px auto;
      border-radius: 10px;
      box-shadow: 0 0 10px #ccc;
      max-width: 700px;
      text-align: right;
    }
    input, button, textarea {
      padding: 10px;
      margin: 5px;
      font-size: 1em;
      border-radius: 5px;
      border: none;
    }
    button {
      background-color: #0072ff;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background-color: #005bb5;
    }
    textarea {
      width: 100%;
      height: 100px;
      resize: vertical;
    }
    .locked {
      color: red;
      font-weight: bold;
    }
    .admin-only {
      display: none;
    }
  </style>
</head>
<body>
  <h1>ğŸ§® Ø±ÛŒØ§Ø¶ÛŒâ€Œ Ù¾Ù„Ø§Ø³</h1>
  <p id="welcomeText">Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ Ù„Ø·ÙØ§Ù‹ ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯.</p>

  <!-- ÙˆØ±ÙˆØ¯ / Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… -->
  <div class="section" id="authSection">
    <h2>ğŸ” ÙˆØ±ÙˆØ¯ / Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</h2>
    <input id="username" placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ">
    <input id="password" type="password" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±">
    <button onclick="login()">ÙˆØ±ÙˆØ¯</button>
    <button onclick="signup()">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</button>
  </div>

  <!-- Ø§ØªØ­Ø§Ø¯Ù‡Ø§ÛŒ Ø±ÛŒØ§Ø¶ÛŒ -->
  <div class="section">
    <h2>ğŸ“ Ø§ØªØ­Ø§Ø¯Ù‡Ø§ÛŒ Ø±ÛŒØ§Ø¶ÛŒ</h2>
    <p>(a + b)Â² = aÂ² + 2ab + bÂ²</p>
    <p>(a - b)Â² = aÂ² - 2ab + bÂ²</p>
    <p>(a + b)(a - b) = aÂ² - bÂ²</p>
    <p>(a + b)Â³ = aÂ³ + 3aÂ²b + 3abÂ² + bÂ³</p>
    <p>(a - b)Â³ = aÂ³ - 3aÂ²b + 3abÂ² - bÂ³</p>
  </div>

  <!-- Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ø¹Ø¯Ø¯ÛŒ -->
  <div class="section locked" id="calcSection">
    <h2>ğŸ§  Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ø¹Ø¯Ø¯ÛŒ</h2>
    <h3>Ø­Ù„ Ù…Ø¹Ø§Ø¯Ù„Ù‡ Ø¯Ø±Ø¬Ù‡ Ø¯ÙˆÙ…</h3>
    <input id="a" type="number" placeholder="a">
    <input id="b" type="number" placeholder="b">
    <input id="c" type="number" placeholder="c">
    <button onclick="solveQuadratic()">Ù…Ø­Ø§Ø³Ø¨Ù‡</button>
    <div id="output"></div>

    <h3>Ø¨Ø±Ø±Ø³ÛŒ Ø¹Ø¯Ø¯ Ø§ÙˆÙ„</h3>
    <input id="primeInput" type="number" placeholder="Ø¹Ø¯Ø¯">
    <button onclick="checkPrime()">Ø¨Ø±Ø±Ø³ÛŒ</button>
    <div id="primeOutput"></div>

    <h3>Ù…Ø­Ø§Ø³Ø¨Ù‡ ÙØ§Ú©ØªÙˆØ±ÛŒÙ„</h3>
    <input id="factInput" type="number" placeholder="Ø¹Ø¯Ø¯">
    <button onclick="calculateFactorial()">Ù…Ø­Ø§Ø³Ø¨Ù‡</button>
    <div id="factOutput"></div>
  </div>

  <!-- ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§ -->
  <div class="section locked" id="notesSection">
    <h2>ğŸ“ ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§</h2>
    <div id="notesContainer"></div>
  </div>

  <!-- Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª -->
  <div class="section admin-only" id="adminSection">
    <h2>ğŸ›  Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª</h2>
    <div id="userList"></div>
  </div>

  <script>
    const USERS_KEY = 'rp_users';
    const CURRENT_KEY = 'rp_current';

    function simpleHash(str) {
      return btoa(unescape(encodeURIComponent(str)));
    }

    function loadUsers() {
      try { return JSON.parse(localStorage.getItem(USERS_KEY) || '[]'); }
      catch(e) { return []; }
    }

    function saveUsers(users) {
      localStorage.setItem(USERS_KEY, JSON.stringify(users));
    }

    function setCurrentUser(username) {
      localStorage.setItem(CURRENT_KEY, username);
    }

    function getCurrentUser() {
      return localStorage.getItem(CURRENT_KEY);
    }

    function login() {
      const u = document.getElementById('username').value.trim();
      const p = document.getElementById('password').value;
      const users = loadUsers();
      const h = simpleHash(p);
      const found = users.find(x => x.username === u && x.password === h);
      if (!found) return alert('Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ÛŒØ§ Ø±Ù…Ø² Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª');
      setCurrentUser(u);
      alert('ÙˆØ±ÙˆØ¯ Ù…ÙˆÙÙ‚ÛŒØªâ€ŒØ¢Ù…ÛŒØ² Ø¨ÙˆØ¯');
      updateUI();
    }

    function signup() {
      const u = document.getElementById('username').value.trim();
      const p = document.getElementById('password').value;
      if (!u || !p) return alert('Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ùˆ Ø±Ù…Ø² Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
      const users = loadUsers();
      if (users.find(x => x.username === u)) return alert('Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ù‚Ø¨Ù„Ø§Ù‹ Ø«Ø¨Øª Ø´Ø¯Ù‡');
      users.push({ username: u, password: simpleHash(p) });
      saveUsers(users);
      setCurrentUser(u);
      alert('Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯');
      updateUI();
    }

    function solveQuadratic() {
      let a = parseFloat(document.getElementById("a").value);
      let b = parseFloat(document.getElementById("b").value);
      let c = parseFloat(document.getElementById("c").value);
      let delta = b*b - 4*a*c;
      let out = document.getElementById("output");
      if (delta < 0) {
        out.innerText = "Ø±ÛŒØ´Ù‡ Ø­Ù‚ÛŒÙ‚ÛŒ Ù†Ø¯Ø§Ø±Ø¯.";
      } else {
        let x1 = (-b + Math.sqrt(delta)) / (2*a);
        let x2 = (-b - Math.sqrt(delta)) / (2*a);
        out.innerText = `Ø±ÛŒØ´Ù‡â€ŒÙ‡Ø§: xâ‚ = ${x1.toFixed(2)}, xâ‚‚ = ${x2.toFixed(2)}`;
      }
    }

    function checkPrime() {
      let n = parseInt(document.getElementById("primeInput").value);
      let out = document.getElementById("primeOutput");
      if (n <= 1) return out.innerText = "Ø¹Ø¯Ø¯ Ø§ÙˆÙ„ Ù†ÛŒØ³Øª.";
      for (let i = 2; i*i <= n; i++) {
        if (n % i === 0) return out.innerText = "Ø¹Ø¯Ø¯ Ø§ÙˆÙ„ Ù†ÛŒØ³Øª.";
      }
      out.innerText = "Ø¹Ø¯Ø¯ Ø§ÙˆÙ„ Ø§Ø³Øª!";
    }

    function calculateFactorial() {
      let n = parseInt(document.getElementById("factInput").value);
      let result = 1;
      for (let i = 2; i <= n; i++) result *= i;
      document.getElementById("factOutput").innerText = `ÙØ§Ú©ØªÙˆØ±ÛŒÙ„: ${result}`;
    }

    function getNotes(username) {
      try {
        return JSON.parse(localStorage.getItem('notes_' + username) || '["","","","",""]');
      } catch(e) {
        return ["","","","",""];
      }
    }

    function saveNotes(username, notes) {
      localStorage.setItem('notes_' + username, JSON.stringify(notes));
    }

    function renderNotes(user) {
      const notes = getNotes(user);
      const container = document.getElementById('notesContainer');
      container.innerHTML = '';
      for (let i = 0; i < 5; i++) {
        container.innerHTML += `
          <h3>ÛŒØ§Ø¯Ø¯Ø§Ø´Øª ${i+1}</h3>
          <textarea id="note${i}">${notes[i]}</textarea>
          <button onclick="saveNote(${